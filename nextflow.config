params.outdir = 'results'
params.group  = 'viral'

process {
    cpus = 2
    memory = '2 GB'
    time = '1h'
}

profiles {
    singularity {
        singularity.enabled = true
        process.container = 'containers/phiflow.sif'
    }

    conda {
        conda.enabled = true
    }

    standard {
        // fallback profile
    }
    
    test {
        params.taxid_file       = "${projectDir}/assets/human-viral-genomes.txt"
        params.reads_dir        = "${projectDir}/tests/data"
        params.outdir           = "./results/test"
        params.breadth_threshold = 0.1
        
        // Limit resources for test environments (like GitHub Actions)
        process {
            cpus   = 2
            memory = '4.GB'
            time   = '1.h'
        }
    }
}


report {
    enabled = true
    file = "${params.outdir}/report.html"
}

timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
}

trace {
    enabled = true
    file = "${params.outdir}/trace.tsv"
}

dag {
    enabled = true
    file = "${params.outdir}/dag.png"
}


